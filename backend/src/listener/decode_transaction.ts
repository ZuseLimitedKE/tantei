import Web3 from "web3";
import abi from "../../abi.json";
import { Errors, MyError } from "../constants/errors";
import "dotenv/config";

export function decode_transactions(input: string): DecodedTransaction{
    if (!process.env.SWAP_CONTRACT) {
        console.log("Setup SWAP_CONTRACT in env");
        throw new MyError(Errors.INVALID_SETUP);
    }

    const web3 = new Web3();
    const contract = new web3.eth.Contract(abi, process.env.SWAP_CONTRACT);
    const result = contract.decodeMethodData(input);
    console.log(result);
}

(() => {
    decode_transactions("0x7ff36ab500000000000000000000000000000000000000000000000000000000007deb5c000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000008b11b900000000000000000000000000000000000000000000000000000196594ca4c300000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000163b5a0000000000000000000000000000000000000000000000000000000000573b7a000000000000000000000000000000000000000000000000000000000011afa2000000000000000000000000000000000000000000000000000000000042b2e0")
})();